{% extends "cryptoshop/base.html" %}
{% load static %}
{% block title %}
    {% if category %}{{ category.name }}{% else %}Crypto products{% endif %}
{% endblock %}
{% block content %}
 <div class="container-fluid text-white">
        <div class="row">
            <div class="col-sm-4 ">
                <section class="categories sticky-top t" >
                    <h3 class="text-white">Categories</h3>
                    <ul class="categories_bar">
                        <li>
                            <a class="nav-link text-white" href="{% url "cryptoshop:product_list" %}">All</a>
                        </li>
                    </ul>
                </section>
            </div>
            <div class="col-sm-8">
                <div class='main_content text-white'>
                    <h1>Products</h1>

                    {% for product in products %}
                        <div class="item px-5">
                            <div class="row">
                                <div class="col-sm-4 ">
                                    <a class="text-white" href="{{ product.get_absolute_url }}">
                                        <img class="img-thumbnail" src="{% if product.image %}{{ product.image.url }}{% else %}{% static "cryptoshop/img/no_image.png" %}{% endif %}">
                                    </a>
                                </div>
                                <div class="col-sm-8 ">
                                    <a class="text-white h3" href="{{ product.get_absolute_url }}">{{ product.name }}</a><br>
                                    <i class="text-white" >Price: ${{  product.price }}</i><br>
                                     {% if user.is_authenticated%}
                                        <a class="btn btn-primary mt-5" href="{{ product.get_absolute_url }}">Add to cart</a>
                                     {% else %}
                                         <button type="button" class="btn btn-primary mt-5" data-toggle="modal" data-target="#exampleModal">Add to cart</button>
                                         <!--Modal--->
                                         <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="exampleModalLabel">Error</h5>
                                                        <button class="btn-close" data-dismiss="modal" aria-label="close"></button>

                                                    </div>
                                                    <div class="modal-body">
                                                        <h6>To add crypto in cart you need to authenticated</h6>
                                                    </div>
                                                </div>
                                            </div>
                                         </div>
                                     {% endif %}
                                </div>
                            </div>>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}